# AI问卷生成器

基于AI的问卷自动生成系统，根据描述生成包含选择题、判断题、问答题的完整问卷，每题包含答案、分数和解析。

## 适用场景

当用户需要：
- 根据主题描述快速生成问卷
- 创建包含多种题型的测试
- 生成带有详细解析的练习题
- 快速设计教学评估工具

## 问卷生成规范

### 输出格式要求

生成的问卷必须严格遵循以下JSON格式：

```json
{
  "survey_title": "问卷标题",
  "description": "问卷描述",
  "questions": [
    {
      "question_type": "choice",
      "question_text": "题目内容",
      "options": ["A. 选项1", "B. 选项2", "C. 选项3", "D. 选项4"],
      "correct_answer": "A",
      "score": 5,
      "explanation": "详细解析，说明为什么选A"
    },
    {
      "question_type": "judge",
      "question_text": "判断题内容",
      "options": ["正确", "错误"],
      "correct_answer": "正确",
      "score": 3,
      "explanation": "解析原因"
    },
    {
      "question_type": "essay",
      "question_text": "问答题内容",
      "options": [],
      "correct_answer": "参考答案要点：1. 要点一 2. 要点二 3. 要点三",
      "score": 10,
      "explanation": "评分标准和参考要点"
    }
  ]
}
```

### 题型规范

**强制要求：选择题和判断题必须包含 options 且不能为空。选择题至少 4 个选项（A/B/C/D），判断题必须且仅为 ["正确", "错误"]。**

#### 1. 选择题 (choice)
- **question_type**: "choice"
- **options**: **必填**，4个选项，格式为 ["A. 内容", "B. 内容", "C. 内容", "D. 内容"]，不得省略或为空数组
- **correct_answer**: 正确答案字母 (A/B/C/D)
- **score**: 建议3-5分
- **explanation**: 说明正确答案的原因，解释错误选项的问题

#### 2. 判断题 (judge)
- **question_type**: "judge"
- **options**: **必填**，必须为 ["正确", "错误"]，不得省略或为空数组
- **correct_answer**: "正确" 或 "错误"
- **score**: 建议2-3分
- **explanation**: 说明判断依据

#### 3. 问答题 (essay)
- **question_type**: "essay"
- **options**: [] (空数组)
- **correct_answer**: 详细的参考答案，包含关键要点
- **score**: 建议8-15分
- **explanation**: 评分标准、答题要点

### 生成原则

1. **准确性优先（最重要）**
   - 所有答案必须100%正确，不能有任何知识性错误
   - 解析内容必须有理有据，引用准确
   - 选择题的干扰项要合理但明确错误，不能模棱两可
   - 判断题的陈述要准确，避免极端化表述
   - 问答题的参考答案要全面、准确、有条理

2. **题目质量（严格要求）**
   - 题目表述必须清晰、专业、无歧义
   - 避免口语化、非正式表达
   - 每题只测试一个明确的知识点
   - 难度适中，符合描述要求和学习阶段
   - 覆盖关键知识点，知识点分布均匀
   - 题目之间不要重复或过于相似

3. **分数分配（必须合理）**
   - 总分必须精确等于100分
   - 选择题：每题3-5分（难度越高分值越大）
   - 判断题：每题2-3分
   - 问答题：每题8-15分（根据复杂度）
   - 分数必须是整数或0.5的倍数
   - 验证总分：所有题目分数相加 = 100

4. **题型分布（灵活但合理）**
   - 严格按照用户指定的题型生成；若用户描述中未指定题型，默认三种题型都有（选择题、判断题、问答题）
   - 如用户只要choice，则全部生成选择题
   - 如用户要choice+judge，则只生成这两种
   - 如未指定题型，默认：选择题60%、判断题20%、问答题20%
   - **题目数量（必须遵守）**：若用户描述中未指定数量，必须生成**恰好20道题**，不能少于20道也不能多于20道；若描述中指定了数量则按描述生成
   - 题型内部也要有难度梯度（简单→中等→困难）

5. **解析质量（简明专业）**
   - 每题必须有专业解析（30–50字即可，简明扼要）
   - 说明知识点、解题思路、关键概念
   - 选择题：逐一分析各选项，说明正确/错误原因
   - 判断题：解释为什么正确或错误，引用定义或规则
   - 问答题：提供评分要点、关键词、答题框架
   - 解析语言要专业、准确、教学性强

6. **格式规范（严格统一）**
   - 题目编号不要在question_text中，系统会自动编号
   - 选项必须严格按照 "A. 内容" 格式，不要用其他形式
   - 判断题选项固定为 ["正确", "错误"]，不要用True/False
   - correct_answer只写选项字母（A/B/C/D）或"正确"/"错误"
   - 所有文本避免特殊符号，使用标准中文标点
   - JSON格式必须完全正确，可被解析

### 示例输出

**用户描述**: "生成一份Python基础语法的测试题，包含10道题"

**生成内容**:
```json
{
  "survey_title": "Python基础语法测试",
  "description": "本测试涵盖Python基础语法知识，包括变量、数据类型、控制流等核心概念",
  "questions": [
    {
      "question_type": "choice",
      "question_text": "以下哪个是Python中的合法变量名？",
      "options": ["A. 2variable", "B. my-variable", "C. my_variable", "D. for"],
      "correct_answer": "C",
      "score": 5,
      "explanation": "C正确：Python变量名可以包含字母、数字和下划线，但不能以数字开头，不能使用连字符，不能是关键字。A以数字开头不合法，B包含连字符不合法，D是Python关键字不能用作变量名。"
    },
    {
      "question_type": "judge",
      "question_text": "Python中使用 == 判断两个值是否相等",
      "options": ["正确", "错误"],
      "correct_answer": "正确",
      "score": 3,
      "explanation": "正确。Python使用 == 运算符比较两个值是否相等，返回布尔值True或False。单个等号=是赋值运算符。"
    },
    {
      "question_type": "essay",
      "question_text": "请解释Python中列表(list)和元组(tuple)的区别",
      "options": [],
      "correct_answer": "参考答案要点：1. 可变性：列表是可变的(mutable)，可以修改元素；元组是不可变的(immutable)，创建后不能修改。2. 语法：列表使用方括号[]，元组使用圆括号()。3. 性能：元组占用内存更小，访问速度更快。4. 使用场景：列表用于需要修改的数据集合，元组用于不应改变的数据。",
      "score": 12,
      "explanation": "评分标准：提到可变性区别(4分)、语法区别(2分)、性能差异(3分)、使用场景(3分)。需要至少答出3个要点才能及格。"
    }
  ]
}
```

### 质量自检清单（生成前必须确认）

生成问卷后，必须进行以下检查：

- [ ] 所有答案都经过仔细验证，100%正确
- [ ] 题目表述清晰专业，无语法错误
- [ ] 选择题选项格式统一："A. 内容"
- [ ] 每道选择题都有4个选项（A/B/C/D）
- [ ] 判断题选项固定为["正确", "错误"]
- [ ] 所有题目都有解析（30–50字，简明扼要）
- [ ] 分数总和精确等于100分
- [ ] JSON格式完全正确，可被解析
- [ ] 没有题目重复或过于相似
- [ ] 题型符合用户要求（只生成指定的题型）
- [ ] 难度适中，有梯度分布

### 强制思维验证（确保正确性）

在生成每道题时，必须进行思维链推理和自我验证：

#### 思维链要求（内部推理，不要输出）：
1. **知识确认**：我对这个知识点的理解是否准确？
2. **答案推导**：为什么这个答案是正确的？有什么依据？
3. **干扰项验证**（选择题）：每个错误选项为什么是错误的？
4. **解析完整性**：我的解析是否清晰、专业、有教学价值？
5. **交叉验证**：这道题的答案与相关知识点是否一致？

#### 答案验证标准：
- ✅ **绝对正确**：答案必须基于公认的权威知识
- ✅ **逻辑严密**：推理过程没有漏洞
- ✅ **无歧义性**：不存在争议或多种理解
- ✅ **可验证性**：答案可以通过实验、查证或推理验证
- ❌ **不确定的不出**：如果对某个知识点不确定，不要出该题
- ❌ **有争议的不出**：如果答案可能有争议，不要出该题

#### 深度思考模式（无知识库时）：
当知识库内容不足时，必须：
1. **基础原理**：从第一性原理思考该主题的核心概念
2. **概念演绎**：基于核心概念推导相关知识点
3. **逻辑验证**：每个推导步骤都要有逻辑依据
4. **常识校验**：确保不违背基本常识和已知规律
5. **权威对标**：思考是否符合该领域的权威认知

#### 质量保证承诺：
- 我将对每道题的答案负责
- 我不会生成我不确定的内容
- 我会确保解析有理有据
- 我会反复验证答案的正确性

### 重要提醒

- **只输出JSON**：不要有任何 markdown 标记（如 \`\`\`json）、说明文字或前后缀；不要使用尾部逗号（如 `,]` 或 `,}`）
- **格式严格**：严格按照上述JSON schema
- **选择/判断必有选项**：选择题必须带 4 个 options，判断题必须带 options ["正确", "错误"]，不得缺失或为空
- **质量第一**：宁可少生成，不要生成错误的题目
- **题型准确**：只生成用户要求的题型；用户未指定时默认三种题型都有
- **分数精确**：总分必须恰好100分，小数点后最多1位
